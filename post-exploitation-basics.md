Incomplete because of incompatible version of bloodhound

https://tryhackme.com/room/postexploit

Login to machine using rdp:
```sh
xfreerdp /dynamic-resolution +clipboard /cert:ignore /v:10.10.59.209 /u:Administrator /p:'P@$$W0rd'
```

# Enumeration w/ Powerview
Powerview is a powerful powershell script from powershell empire that can be used for enumerating a domain after you have already gained a shell in the system.

We'll be focusing on how to start up and get users and groups from PowerView.

1. Start Powershell - ```powershell -ep bypass``` -ep bypasses the execution policy of powershell allowing you to easily run scripts

![image](https://github.com/vivekprm/hackers-manual/assets/2403660/8a70f2e3-29a2-4139-b577-753127c92993)

2. Start PowerView - ```. .\Downloads\PowerView.ps1```

3. Enumerate the domain users - ```Get-NetUser | select cn```    
![image](https://github.com/vivekprm/hackers-manual/assets/2403660/a2ca369f-5f05-4fba-bc0f-19e03528d625)

4. Enumerate the domain groups - ```Get-NetGroup -GroupName *admin*```
![image](https://github.com/vivekprm/hackers-manual/assets/2403660/0869db99-a345-4621-a1b2-f13749bf7d4c)

Now enumerate the domain further on your own
Here's a cheatsheet to help you with commands: https://gist.github.com/HarmJ0y/184f9822b195c52dd50c379ed3117993

# Enumeration w/ Bloodhound
Bloodhound is a graphical interface that allows you to visually map out the network. This tool along with SharpHound which similar to PowerView takes the user, 
groups, trusts etc. of the network and collects them into .json files to be used inside of Bloodhound.

Well be focusing on how to collect the .json files and how to import them into Bloodhound

## BloodHound Installation
1. ```apt-get install bloodhound```    
2. ```neo4j console``` - default credentials -> neo4j:neo4j

## Getting loot w/ SharpHound
1. ```powershell -ep bypass``` same as with PowerView
2. ```. .\Downloads\SharpHound.ps1```   
3. ```Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip```

![image](https://github.com/vivekprm/hackers-manual/assets/2403660/f310db29-1b1d-4a70-ba31-cb9a706e49f8)

4. Transfer the loot.zip folder to your Attacker Machine

note: you can use scp to transfer the file if youâ€™re using ssh

## Mapping the network w/ BloodHound
1. bloodhound Run this on your attacker machine not the victim machine
2. Sign In using the same credentials you set with Neo4j

![image](https://github.com/vivekprm/hackers-manual/assets/2403660/a8029c4b-a9df-496e-9839-a0031cac0718)

3. Inside of Bloodhound search for this icon  and import the loot.zip folder

note: On some versions of BloodHound the import button does not work to get around this simply drag and drop the loot.zip folder into Bloodhound to import 
the .json files

4. To view the graphed network open the menu and select queries this will give you a list of pre-compiled queries to choose from.
![image](https://github.com/vivekprm/hackers-manual/assets/2403660/7940fd57-75b8-4fac-8dc8-3931292be35a)

The queries can be as simple as find all domain admins 
![image](https://github.com/vivekprm/hackers-manual/assets/2403660/96b63aa3-47dd-4785-9083-5b696043faf8)

Or as complicated as shortest path to high value targets
There are plenty of queries to choose from and enumerate connections inside of the network

